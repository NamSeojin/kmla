(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof module==="object"&&typeof exports!=="undefined"){module.exports=b()}else{a.Papa=b()}}}(this,function moduleFactory(){var u=(function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof u!=="undefined"){return u}return{}})();function v(){var B=u.URL||u.webkitURL||null;var C=moduleFactory.toString();return r.BLOB_URL||(r.BLOB_URL=B.createObjectURL(new Blob(["(",C,")();"],{type:"text/javascript"})))}var s=!u.document&&!!u.postMessage,A=s&&/blob:/i.test((u.location||{}).protocol);var z={},x=0;var r={};r.parse=g;r.unparse=i;r.RECORD_SEP=String.fromCharCode(30);r.UNIT_SEP=String.fromCharCode(31);r.BYTE_ORDER_MARK="\ufeff";r.BAD_DELIMITERS=["\r","\n",'"',r.BYTE_ORDER_MARK];r.WORKERS_SUPPORTED=!s&&!!u.Worker;r.NODE_STREAM_INPUT=1;r.LocalChunkSize=1024*1024*10;r.RemoteChunkSize=1024*1024*5;r.DefaultDelimiter=",";r.Parser=b;r.ParserHandle=y;r.NetworkStreamer=o;r.FileStreamer=q;r.StringStreamer=m;r.ReadableStreamStreamer=c;if(typeof PAPA_BROWSER_CONTEXT==="undefined"){r.DuplexStreamStreamer=w}if(u.jQuery){var f=u.jQuery;f.fn.parse=function(F){var E=F.config||{};var C=[];this.each(function(I){var H=f(this).prop("tagName").toUpperCase()==="INPUT"&&f(this).attr("type").toLowerCase()==="file"&&u.FileReader;if(!H||!this.files||this.files.length===0){return true}for(var J=0;J<this.files.length;J++){C.push({file:this.files[J],inputElem:this,instanceConfig:f.extend({},E)})}});G();return this;function G(){if(C.length===0){if(a(F.complete)){F.complete()}return}var J=C[0];if(a(F.before)){var I=F.before(J.file,J.inputElem);if(typeof I==="object"){if(I.action==="abort"){D("AbortError",J.file,J.inputElem,I.reason);return}else{if(I.action==="skip"){B();return}else{if(typeof I.config==="object"){J.instanceConfig=f.extend(J.instanceConfig,I.config)}}}}else{if(I==="skip"){B();return}}}var H=J.instanceConfig.complete;J.instanceConfig.complete=function(K){if(a(H)){H(K,J.file,J.inputElem)}B()};r.parse(J.file,J.instanceConfig)}function D(H,I,J,K){if(a(F.error)){F.error({name:H},I,J,K)}}function B(){C.splice(0,1);G()}}}if(A){u.onmessage=n}function g(F,E){E=E||{};var C=E.dynamicTyping||false;if(a(C)){E.dynamicTypingFunction=C;C={}}E.dynamicTyping=C;E.transform=a(E.transform)?E.transform:false;if(E.worker&&r.WORKERS_SUPPORTED){var B=h();B.userStep=E.step;B.userChunk=E.chunk;B.userComplete=E.complete;B.userError=E.error;E.step=a(E.step);E.chunk=a(E.chunk);E.complete=a(E.complete);E.error=a(E.error);delete E.worker;B.postMessage({input:F,config:E,workerId:B.id});return}var D=null;if(F===r.NODE_STREAM_INPUT&&typeof PAPA_BROWSER_CONTEXT==="undefined"){D=new w(E);return D.getStream()}else{if(typeof F==="string"){if(E.download){D=new o(E)}else{D=new m(E)}}else{if(F.readable===true&&a(F.read)&&a(F.on)){D=new c(E)}else{if((u.File&&F instanceof File)||F instanceof Object){D=new q(E)}}}}return D.stream(F)}function i(P,N){var C=false;var O=true;var J=",";var D="\r\n";var L='"';var I=L+L;var H=false;var G=null;var M=false;K();var E=new RegExp(e(L),"g");if(typeof P==="string"){P=JSON.parse(P)}if(Array.isArray(P)){if(!P.length||Array.isArray(P[0])){return Q(null,P,H)}else{if(typeof P[0]==="object"){return Q(G||Object.keys(P[0]),P,H)}}}else{if(typeof P==="object"){if(typeof P.data==="string"){P.data=JSON.parse(P.data)}if(Array.isArray(P.data)){if(!P.fields){P.fields=P.meta&&P.meta.fields}if(!P.fields){P.fields=Array.isArray(P.data[0])?P.fields:typeof P.data[0]==="object"?Object.keys(P.data[0]):[]}if(!(Array.isArray(P.data[0]))&&typeof P.data[0]!=="object"){P.data=[P.data]}}return Q(P.fields||[],P.data||[],H)}}throw new Error("Unable to serialize unrecognized input");function K(){if(typeof N!=="object"){return}if(typeof N.delimiter==="string"&&!r.BAD_DELIMITERS.filter(function(R){return N.delimiter.indexOf(R)!==-1}).length){J=N.delimiter}if(typeof N.quotes==="boolean"||typeof N.quotes==="function"||Array.isArray(N.quotes)){C=N.quotes}if(typeof N.skipEmptyLines==="boolean"||typeof N.skipEmptyLines==="string"){H=N.skipEmptyLines}if(typeof N.newline==="string"){D=N.newline}if(typeof N.quoteChar==="string"){L=N.quoteChar}if(typeof N.header==="boolean"){O=N.header}if(Array.isArray(N.columns)){if(N.columns.length===0){throw new Error("Option columns is empty")}G=N.columns}if(N.escapeChar!==undefined){I=N.escapeChar+L}if(typeof N.escapeFormulae==="boolean"){M=N.escapeFormulae}}function Q(aa,X,S){var V="";if(typeof aa==="string"){aa=JSON.parse(aa)}if(typeof X==="string"){X=JSON.parse(X)}var Z=Array.isArray(aa)&&aa.length>0;var ad=!(Array.isArray(X[0]));if(Z&&O){for(var Y=0;Y<aa.length;Y++){if(Y>0){V+=J}V+=F(aa[Y],Y)}if(X.length>0){V+=D}}for(var ag=0;ag<X.length;ag++){var ae=Z?aa.length:X[ag].length;var U=false;var ac=Z?Object.keys(X[ag]).length===0:X[ag].length===0;if(S&&!Z){U=S==="greedy"?X[ag].join("").trim()==="":X[ag].length===1&&X[ag][0].length===0}if(S==="greedy"&&Z){var af=[];for(var ab=0;ab<ae;ab++){var T=ad?aa[ab]:ab;af.push(X[ag][T])}U=af.join("").trim()===""}if(!U){for(var R=0;R<ae;R++){if(R>0&&!ac){V+=J}var W=Z&&ad?aa[R]:R;V+=F(X[ag][W],R)}if(ag<X.length-1&&(!S||(ae>0&&!ac))){V+=D}}}return V}function F(U,R){if(typeof U==="undefined"||U===null){return""}if(U.constructor===Date){return JSON.stringify(U).slice(1,25)}if(M===true&&typeof U==="string"&&(U.match(/^[=+\-@].*$/)!==null)){U="'"+U}var T=U.toString().replace(E,I);var S=(typeof C==="boolean"&&C)||(typeof C==="function"&&C(U,R))||(Array.isArray(C)&&C[R])||B(T,r.BAD_DELIMITERS)||T.indexOf(J)>-1||T.charAt(0)===" "||T.charAt(T.length-1)===" ";return S?L+T+L:T}function B(T,S){for(var R=0;R<S.length;R++){if(T.indexOf(S[R])>-1){return true}}return false}}function p(C){this._handle=null;this._finished=false;this._completed=false;this._halted=false;this._input=null;this._baseIndex=0;this._partialLine="";this._rowCount=0;this._start=0;this._nextChunk=null;this.isFirstChunk=true;this._completeResults={data:[],errors:[],meta:{}};B.call(this,C);this.parseChunk=function(F,D){if(this.isFirstChunk&&a(this._config.beforeFirstChunk)){var E=this._config.beforeFirstChunk(F);if(E!==undefined){F=E}}this.isFirstChunk=false;this._halted=false;var H=this._partialLine+F;this._partialLine="";var G=this._handle.parse(H,this._baseIndex,!this._finished);if(this._handle.paused()||this._handle.aborted()){this._halted=true;return}var J=G.meta.cursor;if(!this._finished){this._partialLine=H.substring(J-this._baseIndex);this._baseIndex=J}if(G&&G.data){this._rowCount+=G.data.length}var I=this._finished||(this._config.preview&&this._rowCount>=this._config.preview);if(A){u.postMessage({results:G,workerId:r.WORKER_ID,finished:I})}else{if(a(this._config.chunk)&&!D){this._config.chunk(G,this._handle);if(this._handle.paused()||this._handle.aborted()){this._halted=true;return}G=undefined;this._completeResults=undefined}}if(!this._config.step&&!this._config.chunk){this._completeResults.data=this._completeResults.data.concat(G.data);this._completeResults.errors=this._completeResults.errors.concat(G.errors);this._completeResults.meta=G.meta}if(!this._completed&&I&&a(this._config.complete)&&(!G||!G.meta.aborted)){this._config.complete(this._completeResults,this._input);this._completed=true}if(!I&&(!G||!G.meta.paused)){this._nextChunk()}return G};this._sendError=function(D){if(a(this._config.error)){this._config.error(D)}else{if(A&&this._config.error){u.postMessage({workerId:r.WORKER_ID,error:D,finished:false})}}};function B(D){var E=t(D);E.chunkSize=parseInt(E.chunkSize);if(!D.step&&!D.chunk){E.chunkSize=null}this._handle=new y(E);this._handle.streamer=this;this._config=E}}function o(B){B=B||{};if(!B.chunkSize){B.chunkSize=r.RemoteChunkSize}p.call(this,B);var D;if(s){this._nextChunk=function(){this._readChunk();this._chunkLoaded()}}else{this._nextChunk=function(){this._readChunk()}}this.stream=function(E){this._input=E;this._nextChunk()};this._readChunk=function(){if(this._finished){this._chunkLoaded();return}D=new XMLHttpRequest();if(this._config.withCredentials){D.withCredentials=this._config.withCredentials}if(!s){D.onload=k(this._chunkLoaded,this);D.onerror=k(this._chunkError,this)}D.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s);if(this._config.downloadRequestHeaders){var G=this._config.downloadRequestHeaders;for(var H in G){D.setRequestHeader(H,G[H])}}if(this._config.chunkSize){var E=this._start+this._config.chunkSize-1;D.setRequestHeader("Range","bytes="+this._start+"-"+E)}try{D.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}if(s&&D.status===0){this._chunkError()}};this._chunkLoaded=function(){if(D.readyState!==4){return}if(D.status<200||D.status>=400){this._chunkError();return}this._start+=this._config.chunkSize?this._config.chunkSize:D.responseText.length;this._finished=!this._config.chunkSize||this._start>=C(D);this.parseChunk(D.responseText)};this._chunkError=function(F){var E=D.statusText||F;this._sendError(new Error(E))};function C(F){var E=F.getResponseHeader("Content-Range");if(E===null){return -1}return parseInt(E.substring(E.lastIndexOf("/")+1))}}o.prototype=Object.create(p.prototype);o.prototype.constructor=o;function q(D){D=D||{};if(!D.chunkSize){D.chunkSize=r.LocalChunkSize}p.call(this,D);var B,E;var C=typeof FileReader!=="undefined";this.stream=function(F){this._input=F;E=F.slice||F.webkitSlice||F.mozSlice;if(C){B=new FileReader();B.onload=k(this._chunkLoaded,this);B.onerror=k(this._chunkError,this)}else{B=new FileReaderSync()}this._nextChunk()};this._nextChunk=function(){if(!this._finished&&(!this._config.preview||this._rowCount<this._config.preview)){this._readChunk()}};this._readChunk=function(){var H=this._input;if(this._config.chunkSize){var G=Math.min(this._start+this._config.chunkSize,this._input.size);H=E.call(H,this._start,G)}var F=B.readAsText(H,this._config.encoding);if(!C){this._chunkLoaded({target:{result:F}})}};this._chunkLoaded=function(F){this._start+=this._config.chunkSize;this._finished=!this._config.chunkSize||this._start>=this._input.size;this.parseChunk(F.target.result)};this._chunkError=function(){this._sendError(B.error)}}q.prototype=Object.create(p.prototype);q.prototype.constructor=q;function m(B){B=B||{};p.call(this,B);var C;this.stream=function(D){C=D;return this._nextChunk()};this._nextChunk=function(){if(this._finished){return}var E=this._config.chunkSize;var D;if(E){D=C.substring(0,E);C=C.substring(E)}else{D=C;C=""}this._finished=!C;return this.parseChunk(D)}}m.prototype=Object.create(m.prototype);m.prototype.constructor=m;function c(E){E=E||{};p.call(this,E);var B=[];var D=true;var C=false;this.pause=function(){p.prototype.pause.apply(this,arguments);this._input.pause()};this.resume=function(){p.prototype.resume.apply(this,arguments);this._input.resume()};this.stream=function(F){this._input=F;this._input.on("data",this._streamData);this._input.on("end",this._streamEnd);this._input.on("error",this._streamError)};this._checkIsFinished=function(){if(C&&B.length===1){this._finished=true}};this._nextChunk=function(){this._checkIsFinished();if(B.length){this.parseChunk(B.shift())}else{D=true}};this._streamData=k(function(G){try{B.push(typeof G==="string"?G:G.toString(this._config.encoding));if(D){D=false;this._checkIsFinished();this.parseChunk(B.shift())}}catch(F){this._streamError(F)}},this);this._streamError=k(function(F){this._streamCleanUp();this._sendError(F)},this);this._streamEnd=k(function(){this._streamCleanUp();C=true;this._streamData("")},this);this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData);this._input.removeListener("end",this._streamEnd);this._input.removeListener("error",this._streamError)},this)}c.prototype=Object.create(p.prototype);c.prototype.constructor=c;function w(G){var C=require("stream").Duplex;var D=t(G);var F=true;var B=false;var E=[];var H=null;this._onCsvData=function(I){var J=I.data;if(!H.push(J)&&!this._handle.paused()){this._handle.pause()}};this._onCsvComplete=function(){H.push(null)};D.step=k(this._onCsvData,this);D.complete=k(this._onCsvComplete,this);p.call(this,D);this._nextChunk=function(){if(B&&E.length===1){this._finished=true}if(E.length){E.shift()()}else{F=true}};this._addToParseQueue=function(I,J){E.push(k(function(){this.parseChunk(typeof I==="string"?I:I.toString(D.encoding));if(a(J)){return J()}},this));if(F){F=false;this._nextChunk()}};this._onRead=function(){if(this._handle.paused()){this._handle.resume()}};this._onWrite=function(I,J,K){this._addToParseQueue(I,K)};this._onWriteComplete=function(){B=true;this._addToParseQueue("")};this.getStream=function(){return H};H=new C({readableObjectMode:true,decodeStrings:false,read:k(this._onRead,this),write:k(this._onWrite,this)});H.once("finish",k(this._onWriteComplete,this))}if(typeof PAPA_BROWSER_CONTEXT==="undefined"){w.prototype=Object.create(p.prototype);w.prototype.constructor=w}function y(I){var ab=Math.pow(2,53);var T=-ab;var Q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/;var N=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/;var R=this;var aa=0;var Y=0;var D;var O;var H=false;var C=false;var Z;var B=[];var F={data:[],errors:[],meta:{}};if(a(I.step)){var W=I.step;I.step=function(ac){F=ac;if(V()){K()}else{K();if(F.data.length===0){return}aa+=ac.data.length;if(I.preview&&aa>I.preview){O.abort()}else{F.data=F.data[0];W(F,R)}}}}this.parse=function(af,ac,ae){var ag=I.quoteChar||'"';if(!I.newline){I.newline=G(af,ag)}Z=false;if(!I.delimiter){var ad=M(af,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);if(ad.successful){I.delimiter=ad.bestDelimiter}else{Z=true;I.delimiter=r.DefaultDelimiter}F.meta.delimiter=I.delimiter}else{if(a(I.delimiter)){I.delimiter=I.delimiter(af);F.meta.delimiter=I.delimiter}}var ah=t(I);if(I.preview&&I.header){ah.preview++}D=af;O=new b(ah);F=O.parse(D,ac,ae);K();return H?{meta:{paused:true}}:(F||{meta:{paused:false}})};this.paused=function(){return H};this.pause=function(){H=true;O.abort();D=a(I.chunk)?"":D.substring(O.getCharIndex())};this.resume=function(){if(R.streamer._halted){H=false;R.streamer.parseChunk(D,true)}else{setTimeout(R.resume,3)}};this.aborted=function(){return C};this.abort=function(){C=true;O.abort();F.meta.aborted=true;if(a(I.complete)){I.complete(F)}D=""};function L(ac){return I.skipEmptyLines==="greedy"?ac.join("").trim()==="":ac.length===1&&ac[0].length===0}function X(ac){if(Q.test(ac)){var ad=parseFloat(ac);if(ad>T&&ad<ab){return true}}return false}function K(){if(F&&Z){U("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+r.DefaultDelimiter+"'");Z=false}if(I.skipEmptyLines){for(var ac=0;ac<F.data.length;ac++){if(L(F.data[ac])){F.data.splice(ac--,1)}}}if(V()){E()}return S()}function V(){return I.header&&B.length===0}function E(){if(!F){return}function ad(af,ae){if(a(I.transformHeader)){af=I.transformHeader(af,ae)}B.push(af)}if(Array.isArray(F.data[0])){for(var ac=0;V()&&ac<F.data.length;ac++){F.data[ac].forEach(ad)}F.data.splice(0,1)}else{F.data.forEach(ad)}}function J(ac){if(I.dynamicTypingFunction&&I.dynamicTyping[ac]===undefined){I.dynamicTyping[ac]=I.dynamicTypingFunction(ac)}return(I.dynamicTyping[ac]||I.dynamicTyping)===true}function P(ad,ac){if(J(ad)){if(ac==="true"||ac==="TRUE"){return true}else{if(ac==="false"||ac==="FALSE"){return false}else{if(X(ac)){return parseFloat(ac)}else{if(N.test(ac)){return new Date(ac)}else{return(ac===""?null:ac)}}}}}return ac}function S(){if(!F||(!I.header&&!I.dynamicTyping&&!I.transform)){return F}function ac(ae,ag){var aj=I.header?{}:[];var af;for(af=0;af<ae.length;af++){var ai=af;var ah=ae[af];if(I.header){ai=af>=B.length?"__parsed_extra":B[af]}if(I.transform){ah=I.transform(ah,ai)}ah=P(ai,ah);if(ai==="__parsed_extra"){aj[ai]=aj[ai]||[];aj[ai].push(ah)}else{aj[ai]=ah}}if(I.header){if(af>B.length){U("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+af,Y+ag)}else{if(af<B.length){U("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+af,Y+ag)}}}return aj}var ad=1;if(!F.data.length||Array.isArray(F.data[0])){F.data=F.data.map(ac);ad=F.data.length}else{F.data=ac(F.data,0)}if(I.header&&F.meta){F.meta.fields=B}Y+=ad;return F}function M(ao,ag,af,al,ac){var ae,ar,an,ah;ac=ac||[",","\t","|",";",r.RECORD_SEP,r.UNIT_SEP];for(var aj=0;aj<ac.length;aj++){var ad=ac[aj];var aq=0,at=0,ak=0;an=undefined;var am=new b({comments:al,delimiter:ad,newline:ag,preview:10}).parse(ao);for(var ai=0;ai<am.data.length;ai++){if(af&&L(am.data[ai])){ak++;continue}var ap=am.data[ai].length;at+=ap;if(typeof an==="undefined"){an=ap;continue}else{if(ap>0){aq+=Math.abs(ap-an);an=ap}}}if(am.data.length>0){at/=(am.data.length-ak)}if((typeof ar==="undefined"||aq<=ar)&&(typeof ah==="undefined"||at>ah)&&at>1.99){ar=aq;ae=ad;ah=at}}I.delimiter=ae;return{successful:!!ae,bestDelimiter:ae}}function G(ad,af){ad=ad.substring(0,1024*1024);var ag=new RegExp(e(af)+"([^]*?)"+e(af),"gm");ad=ad.replace(ag,"");var ah=ad.split("\r");var aj=ad.split("\n");var ai=(aj.length>1&&aj[0].length<ah[0].length);if(ah.length===1||ai){return"\n"}var ac=0;for(var ae=0;ae<ah.length;ae++){if(ah[ae][0]==="\n"){ac++}}return ac>=ah.length/2?"\r\n":"\r"}function U(ad,ae,ag,af){var ac={type:ad,code:ae,message:ag};if(af!==undefined){ac.row=af}F.errors.push(ac)}}function e(B){return B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(E){E=E||{};var C=E.delimiter;var F=E.newline;var I=E.comments;var D=E.step;var J=E.preview;var H=E.fastMode;var G;if(E.quoteChar===undefined){G='"'}else{G=E.quoteChar}var L=G;if(E.escapeChar!==undefined){L=E.escapeChar}if(typeof C!=="string"||r.BAD_DELIMITERS.indexOf(C)>-1){C=","}if(I===C){throw new Error("Comment character same as delimiter")}else{if(I===true){I="#"}else{if(typeof I!=="string"||r.BAD_DELIMITERS.indexOf(I)>-1){I=false}}}if(F!=="\n"&&F!=="\r"&&F!=="\r\n"){F="\n"}var K=0;var B=false;this.parse=function(ad,ae,Y){if(typeof ad!=="string"){throw new Error("Input must be a string")}var af=ad.length,R=C.length,al=F.length,N=I.length;var ag=a(D);K=0;var an=[],Z=[],T=[],ab=0;if(!ad){return aj()}if(H||(H!==false&&ad.indexOf(G)===-1)){var aa=ad.split(F);for(var ak=0;ak<aa.length;ak++){T=aa[ak];K+=T.length;if(ak!==aa.length-1){K+=F.length}else{if(Y){return aj()}}if(I&&T.substring(0,N)===I){continue}if(ag){an=[];Q(T.split(C));P();if(B){return aj()}}else{Q(T.split(C))}if(J&&ak>=J){an=an.slice(0,J);return aj(true)}}return aj()}var M=ad.indexOf(C,K);var S=ad.indexOf(F,K);var W=new RegExp(e(L)+e(G),"g");var O=ad.indexOf(G,K);for(;;){if(ad[K]===G){O=K;K++;for(;;){O=ad.indexOf(G,O+1);if(O===-1){if(!Y){Z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:an.length,index:K})}return ah()}if(O===af-1){var ai=ad.substring(K,O).replace(W,G);return ah(ai)}if(G===L&&ad[O+1]===L){O++;continue}if(G!==L&&O!==0&&ad[O-1]===L){continue}if(M!==-1&&M<(O+1)){M=ad.indexOf(C,(O+1))}if(S!==-1&&S<(O+1)){S=ad.indexOf(F,(O+1))}var am=S===-1?M:Math.min(M,S);var V=U(am);if(ad.substr(O+1+V,R)===C){T.push(ad.substring(K,O).replace(W,G));K=O+1+V+R;if(ad[O+1+V+R]!==G){O=ad.indexOf(G,K)}M=ad.indexOf(C,K);S=ad.indexOf(F,K);break}var ac=U(S);if(ad.substring(O+1+ac,O+1+ac+al)===F){T.push(ad.substring(K,O).replace(W,G));X(O+1+ac+al);M=ad.indexOf(C,K);O=ad.indexOf(G,K);if(ag){P();if(B){return aj()}}if(J&&an.length>=J){return aj(true)}break}Z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:an.length,index:K});O++;continue}continue}if(I&&T.length===0&&ad.substring(K,K+N)===I){if(S===-1){return aj()}K=S+al;S=ad.indexOf(F,K);M=ad.indexOf(C,K);continue}if(M!==-1&&(M<S||S===-1)){T.push(ad.substring(K,M));K=M+R;M=ad.indexOf(C,K);continue}if(S!==-1){T.push(ad.substring(K,S));X(S+al);if(ag){P();if(B){return aj()}}if(J&&an.length>=J){return aj(true)}continue}break}return ah();function Q(ao){an.push(ao);ab=K}function U(ap){var ao=0;if(ap!==-1){var aq=ad.substring(O+1,ap);if(aq&&aq.trim()===""){ao=aq.length}}return ao}function ah(ao){if(Y){return aj()}if(typeof ao==="undefined"){ao=ad.substring(K)}T.push(ao);K=af;Q(T);if(ag){P()}return aj()}function X(ao){K=ao;Q(T);T=[];S=ad.indexOf(F,K)}function aj(ao){return{data:an,errors:Z,meta:{delimiter:C,linebreak:F,aborted:B,truncated:!!ao,cursor:ab+(ae||0)}}}function P(){D(aj());an=[];Z=[]}};this.abort=function(){B=true};this.getCharIndex=function(){return K}}function h(){if(!r.WORKERS_SUPPORTED){return false}var C=v();var B=new u.Worker(C);B.onmessage=d;B.id=x++;z[B.id]=B;return B}function d(E){var G=E.data;var F=z[G.workerId];var D=false;if(G.error){F.userError(G.error,G.file)}else{if(G.results&&G.results.data){var H=function(){D=true;j(G.workerId,{data:[],errors:[],meta:{aborted:true}})};var C={abort:H,pause:l,resume:l};if(a(F.userStep)){for(var B=0;B<G.results.data.length;B++){F.userStep({data:G.results.data[B],errors:G.results.errors,meta:G.results.meta},C);if(D){break}}delete G.results}else{if(a(F.userChunk)){F.userChunk(G.results,C,G.file);delete G.results}}}}if(G.finished&&!D){j(G.workerId,G.results)}}function j(D,B){var C=z[D];if(a(C.userComplete)){C.userComplete(B)}C.terminate();delete z[D]}function l(){throw new Error("Not implemented.")}function n(C){var D=C.data;if(typeof r.WORKER_ID==="undefined"&&D){r.WORKER_ID=D.workerId}if(typeof D.input==="string"){u.postMessage({workerId:r.WORKER_ID,results:r.parse(D.input,D.config),finished:true})}else{if((u.File&&D.input instanceof File)||D.input instanceof Object){var B=r.parse(D.input,D.config);if(B){u.postMessage({workerId:r.WORKER_ID,results:B,finished:true})}}}}function t(D){if(typeof D!=="object"||D===null){return D}var B=Array.isArray(D)?[]:{};for(var C in D){B[C]=t(D[C])}return B}function k(C,B){return function(){C.apply(B,arguments)}}function a(B){return typeof B==="function"}return r}));